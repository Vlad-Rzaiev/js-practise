{"version":3,"file":"cost-calculation.js","sources":["../src/js/cost-calculation.js"],"sourcesContent":["const budgetForm = document.querySelector('.budget-form');\nconst yourBudget = document.querySelector('.your-budget');\nconst costsForm = document.querySelector('.costs-form');\nconst costsTable = document.querySelector('.costs-table');\nconst totalPrice = document.querySelector('.total-price');\nconst message = document.querySelector('.message');\n\nlet userInputBudget;\nlet totalUserPrice = 0;\nconst userCosts = [];\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (localStorage.getItem('userBudget') !== null) {\n    userInputBudget = Number(localStorage.getItem('userBudget'));\n\n    yourBudget.style.display = 'block';\n    yourBudget.textContent = `Your budget is ${userInputBudget} $.`;\n  }\n\n  const userDataFromLS =\n    JSON.parse(localStorage.getItem('user-products')) || [];\n\n  const productsFromLS = userDataFromLS\n    .map(\n      product => `\n        <tr class=\"costs-table-row\">\n          <td class=\"costs-table-text\">${product.name}</td>\n          <td class=\"costs-table-text\">${product.price}</td>\n        </tr>\n    `\n    )\n    .join('');\n  costsTable.insertAdjacentHTML('beforeend', productsFromLS);\n\n  totalPrice.textContent = `${userDataFromLS[userDataFromLS.length - 1].total}`;\n});\n\nconst onClickBudgetSubmitBtn = e => {\n  e.preventDefault();\n\n  userInputBudget = Number(e.target.elements.budget.value);\n  localStorage.setItem('userBudget', userInputBudget);\n  yourBudget.style.display = 'block';\n  yourBudget.textContent = `Your budget is ${userInputBudget} $`;\n\n  e.target.reset();\n};\n\nconst onClickCostsSubmitBtn = e => {\n  e.preventDefault();\n  message.style.display = 'none';\n\n  const userInputProduct = e.target.elements.title.value.trim();\n  const userInputPrice = Number(e.target.elements.price.value);\n\n  if (!userInputProduct || isNaN(userInputPrice) || userInputPrice <= 0) {\n    message.style.display = 'block';\n    message.textContent = 'Please enter valid product name and price!';\n    return;\n  }\n\n  totalUserPrice += userInputPrice;\n  totalPrice.textContent = `${totalUserPrice}`;\n\n  userCosts.push({\n    name: userInputProduct,\n    price: userInputPrice,\n    total: totalUserPrice,\n  });\n\n  localStorage.setItem('user-products', JSON.stringify(userCosts));\n\n  userInputBudget -= userInputPrice;\n  localStorage.setItem('userBudget', userInputBudget);\n\n  yourBudget.textContent = `Your budget is ${userInputBudget} $.`;\n  message.style.display = 'block';\n  message.textContent = `Product ${userInputProduct} has added`;\n\n  const costsTableRow = `\n    <tr class=\"costs-table-row\">\n      <td class=\"costs-table-text\">${userInputProduct}</td>\n      <td class=\"costs-table-text\">${userInputPrice}</td>\n    </tr>\n  `;\n\n  costsTable.insertAdjacentHTML('beforeend', costsTableRow);\n\n  e.target.elements.title.focus();\n\n  if (userInputBudget <= 0) {\n    yourBudget.textContent = `Over budget! You've spent all your money.`;\n  }\n\n  e.target.reset();\n};\n\nbudgetForm.addEventListener('submit', onClickBudgetSubmitBtn);\n\ncostsForm.addEventListener('submit', onClickCostsSubmitBtn);\n"],"names":["budgetForm","yourBudget","costsForm","costsTable","totalPrice","message","userInputBudget","totalUserPrice","userCosts","userDataFromLS","productsFromLS","product","onClickBudgetSubmitBtn","e","onClickCostsSubmitBtn","userInputProduct","userInputPrice","costsTableRow"],"mappings":"oDAAA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EACAC,EAAiB,EACrB,MAAMC,EAAY,CAAA,EAElB,SAAS,iBAAiB,mBAAoB,IAAM,CAC9C,aAAa,QAAQ,YAAY,IAAM,OACzCF,EAAkB,OAAO,aAAa,QAAQ,YAAY,CAAC,EAE3DL,EAAW,MAAM,QAAU,QAC3BA,EAAW,YAAc,kBAAkBK,CAAe,OAG5D,MAAMG,EACJ,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAEjDC,EAAiBD,EACpB,IACCE,GAAW;AAAA;AAAA,yCAEwBA,EAAQ,IAAI;AAAA,yCACZA,EAAQ,KAAK;AAAA;AAAA,KAGjD,EACA,KAAK,EAAE,EACVR,EAAW,mBAAmB,YAAaO,CAAc,EAEzDN,EAAW,YAAc,GAAGK,EAAeA,EAAe,OAAS,CAAC,EAAE,KAAK,EAC7E,CAAC,EAED,MAAMG,EAAyBC,GAAK,CAClCA,EAAE,eAAc,EAEhBP,EAAkB,OAAOO,EAAE,OAAO,SAAS,OAAO,KAAK,EACvD,aAAa,QAAQ,aAAcP,CAAe,EAClDL,EAAW,MAAM,QAAU,QAC3BA,EAAW,YAAc,kBAAkBK,CAAe,KAE1DO,EAAE,OAAO,OACX,EAEMC,EAAwBD,GAAK,CACjCA,EAAE,eAAc,EAChBR,EAAQ,MAAM,QAAU,OAExB,MAAMU,EAAmBF,EAAE,OAAO,SAAS,MAAM,MAAM,OACjDG,EAAiB,OAAOH,EAAE,OAAO,SAAS,MAAM,KAAK,EAE3D,GAAI,CAACE,GAAoB,MAAMC,CAAc,GAAKA,GAAkB,EAAG,CACrEX,EAAQ,MAAM,QAAU,QACxBA,EAAQ,YAAc,6CACtB,MACD,CAEDE,GAAkBS,EAClBZ,EAAW,YAAc,GAAGG,CAAc,GAE1CC,EAAU,KAAK,CACb,KAAMO,EACN,MAAOC,EACP,MAAOT,CACX,CAAG,EAED,aAAa,QAAQ,gBAAiB,KAAK,UAAUC,CAAS,CAAC,EAE/DF,GAAmBU,EACnB,aAAa,QAAQ,aAAcV,CAAe,EAElDL,EAAW,YAAc,kBAAkBK,CAAe,MAC1DD,EAAQ,MAAM,QAAU,QACxBA,EAAQ,YAAc,WAAWU,CAAgB,aAEjD,MAAME,EAAgB;AAAA;AAAA,qCAEaF,CAAgB;AAAA,qCAChBC,CAAc;AAAA;AAAA,IAIjDb,EAAW,mBAAmB,YAAac,CAAa,EAExDJ,EAAE,OAAO,SAAS,MAAM,MAAK,EAEzBP,GAAmB,IACrBL,EAAW,YAAc,6CAG3BY,EAAE,OAAO,OACX,EAEAb,EAAW,iBAAiB,SAAUY,CAAsB,EAE5DV,EAAU,iBAAiB,SAAUY,CAAqB"}