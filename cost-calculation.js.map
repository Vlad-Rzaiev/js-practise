{"version":3,"file":"cost-calculation.js","sources":["../src/js/cost-calculation.js"],"sourcesContent":["const budgetForm = document.querySelector('.budget-form');\nconst yourBudget = document.querySelector('.your-budget');\nconst costsForm = document.querySelector('.costs-form');\nconst costsTable = document.querySelector('.costs-table');\nconst totalPrice = document.querySelector('.total-price');\nconst message = document.querySelector('.message');\nconst removeBtn = document.querySelector('.remove-list-btn');\n\nlet userInputBudget;\nlet totalUserPrice = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (localStorage.getItem('userBudget') !== null) {\n    userInputBudget = Number(localStorage.getItem('userBudget'));\n\n    yourBudget.style.display = 'block';\n    yourBudget.textContent = `Your budget is ${userInputBudget} $.`;\n  }\n\n  const userDataFromLS = dataFromLS();\n\n  const productsFromLS = userDataFromLS\n    .map(\n      product => `\n        <tr class=\"costs-table-row user-row\">\n          <td class=\"costs-table-text border-right\">${product.name}</td>\n          <td class=\"costs-table-text\">${product.price}</td>\n        </tr>\n    `\n    )\n    .join('');\n  costsTable.insertAdjacentHTML('beforeend', productsFromLS);\n\n  totalPrice.textContent = `${totalPriceFromLS()}`;\n});\n\nconst dataFromLS = () => {\n  return JSON.parse(localStorage.getItem('user-products')) || [];\n};\n\nconst totalPriceFromLS = () => {\n  return parseFloat(localStorage.getItem('total-price')) || 0;\n};\n\nconst onClickBudgetSubmitBtn = e => {\n  e.preventDefault();\n\n  userInputBudget = Number(e.target.elements.budget.value);\n  localStorage.setItem('userBudget', userInputBudget);\n  yourBudget.style.display = 'block';\n  yourBudget.textContent = `Your budget is ${userInputBudget} $`;\n\n  e.target.reset();\n};\n\nconst onClickCostsSubmitBtn = e => {\n  e.preventDefault();\n  message.style.display = 'none';\n\n  const userInputProduct = e.target.elements.title.value.trim();\n  const userInputPrice = Number(e.target.elements.price.value);\n  console.log(userInputPrice);\n\n  if (!userInputProduct || isNaN(userInputPrice) || userInputPrice <= 0) {\n    message.style.display = 'block';\n    message.textContent = 'Please enter valid product name and price!';\n    return;\n  }\n\n  totalUserPrice = parseFloat((userInputPrice + totalPriceFromLS()).toFixed(2));\n  totalPrice.textContent = `${totalUserPrice}`;\n  localStorage.setItem('total-price', String(totalUserPrice));\n\n  const userCosts = dataFromLS();\n\n  userCosts.push({\n    name: userInputProduct,\n    price: userInputPrice,\n  });\n\n  localStorage.setItem('user-products', JSON.stringify(userCosts));\n\n  userInputBudget = parseFloat((userInputBudget - userInputPrice).toFixed(2));\n  localStorage.setItem('userBudget', userInputBudget);\n\n  yourBudget.textContent = `Your budget is ${userInputBudget} $.`;\n  message.style.display = 'block';\n  message.textContent = `Product ${userInputProduct} has added to list`;\n\n  const costsTableRow = `\n    <tr class=\"costs-table-row user-row\">\n      <td class=\"costs-table-text border-right\">${userInputProduct}</td>\n      <td class=\"costs-table-text\">${userInputPrice}</td>\n    </tr>\n  `;\n\n  costsTable.insertAdjacentHTML('beforeend', costsTableRow);\n\n  e.target.elements.title.focus();\n\n  if (userInputBudget < 0) {\n    yourBudget.textContent = `Over budget! You've spent all your money.`;\n  }\n\n  e.target.reset();\n};\n\nconst onClickRemoveBtn = () => {\n  const userRows = document.querySelectorAll('.user-row');\n\n  localStorage.removeItem('user-products');\n  localStorage.removeItem('total-price');\n\n  userRows.forEach(row => row.remove());\n  totalPrice.textContent = '0';\n};\n\nbudgetForm.addEventListener('submit', onClickBudgetSubmitBtn);\n\ncostsForm.addEventListener('submit', onClickCostsSubmitBtn);\n\nremoveBtn.addEventListener('click', onClickRemoveBtn);\n"],"names":["budgetForm","yourBudget","costsForm","costsTable","totalPrice","message","removeBtn","userInputBudget","totalUserPrice","productsFromLS","dataFromLS","product","totalPriceFromLS","onClickBudgetSubmitBtn","e","onClickCostsSubmitBtn","userInputProduct","userInputPrice","userCosts","costsTableRow","onClickRemoveBtn","userRows","row"],"mappings":"oDAAA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,kBAAkB,EAE3D,IAAIC,EACAC,EAAiB,EAErB,SAAS,iBAAiB,mBAAoB,IAAM,CAC9C,aAAa,QAAQ,YAAY,IAAM,OACzCD,EAAkB,OAAO,aAAa,QAAQ,YAAY,CAAC,EAE3DN,EAAW,MAAM,QAAU,QAC3BA,EAAW,YAAc,kBAAkBM,CAAe,OAK5D,MAAME,EAFiBC,IAGpB,IACCC,GAAW;AAAA;AAAA,sDAEqCA,EAAQ,IAAI;AAAA,yCACzBA,EAAQ,KAAK;AAAA;AAAA,KAGjD,EACA,KAAK,EAAE,EACVR,EAAW,mBAAmB,YAAaM,CAAc,EAEzDL,EAAW,YAAc,GAAGQ,EAAgB,CAAE,EAChD,CAAC,EAED,MAAMF,EAAa,IACV,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAGxDE,EAAmB,IAChB,WAAW,aAAa,QAAQ,aAAa,CAAC,GAAK,EAGtDC,EAAyBC,GAAK,CAClCA,EAAE,eAAc,EAEhBP,EAAkB,OAAOO,EAAE,OAAO,SAAS,OAAO,KAAK,EACvD,aAAa,QAAQ,aAAcP,CAAe,EAClDN,EAAW,MAAM,QAAU,QAC3BA,EAAW,YAAc,kBAAkBM,CAAe,KAE1DO,EAAE,OAAO,OACX,EAEMC,EAAwBD,GAAK,CACjCA,EAAE,eAAc,EAChBT,EAAQ,MAAM,QAAU,OAExB,MAAMW,EAAmBF,EAAE,OAAO,SAAS,MAAM,MAAM,OACjDG,EAAiB,OAAOH,EAAE,OAAO,SAAS,MAAM,KAAK,EAG3D,GAFA,QAAQ,IAAIG,CAAc,EAEtB,CAACD,GAAoB,MAAMC,CAAc,GAAKA,GAAkB,EAAG,CACrEZ,EAAQ,MAAM,QAAU,QACxBA,EAAQ,YAAc,6CACtB,MACD,CAEDG,EAAiB,YAAYS,EAAiBL,EAAgB,GAAI,QAAQ,CAAC,CAAC,EAC5ER,EAAW,YAAc,GAAGI,CAAc,GAC1C,aAAa,QAAQ,cAAe,OAAOA,CAAc,CAAC,EAE1D,MAAMU,EAAYR,IAElBQ,EAAU,KAAK,CACb,KAAMF,EACN,MAAOC,CACX,CAAG,EAED,aAAa,QAAQ,gBAAiB,KAAK,UAAUC,CAAS,CAAC,EAE/DX,EAAkB,YAAYA,EAAkBU,GAAgB,QAAQ,CAAC,CAAC,EAC1E,aAAa,QAAQ,aAAcV,CAAe,EAElDN,EAAW,YAAc,kBAAkBM,CAAe,MAC1DF,EAAQ,MAAM,QAAU,QACxBA,EAAQ,YAAc,WAAWW,CAAgB,qBAEjD,MAAMG,EAAgB;AAAA;AAAA,kDAE0BH,CAAgB;AAAA,qCAC7BC,CAAc;AAAA;AAAA,IAIjDd,EAAW,mBAAmB,YAAagB,CAAa,EAExDL,EAAE,OAAO,SAAS,MAAM,MAAK,EAEzBP,EAAkB,IACpBN,EAAW,YAAc,6CAG3Ba,EAAE,OAAO,OACX,EAEMM,EAAmB,IAAM,CAC7B,MAAMC,EAAW,SAAS,iBAAiB,WAAW,EAEtD,aAAa,WAAW,eAAe,EACvC,aAAa,WAAW,aAAa,EAErCA,EAAS,QAAQC,GAAOA,EAAI,OAAQ,CAAA,EACpClB,EAAW,YAAc,GAC3B,EAEAJ,EAAW,iBAAiB,SAAUa,CAAsB,EAE5DX,EAAU,iBAAiB,SAAUa,CAAqB,EAE1DT,EAAU,iBAAiB,QAASc,CAAgB"}