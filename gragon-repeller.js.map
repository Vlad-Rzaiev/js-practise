{"version":3,"file":"gragon-repeller.js","sources":["../src/js/dragon-repeller.js"],"sourcesContent":["let xp = 0;\nlet health = 100;\nlet gold = 50;\nlet currentWeaponIndex = 0;\nlet fighting;\nlet monsterHealth;\nlet inventory = ['stick'];\n\nconst button1 = document.querySelector('#button1');\nconst button2 = document.querySelector('#button2');\nconst button3 = document.querySelector('#button3');\nconst text = document.querySelector('#text');\nconst xpText = document.querySelector('#xpText');\nconst healthText = document.querySelector('#healthText');\nconst goldText = document.querySelector('#goldText');\nconst monsterStats = document.querySelector('#monsterStats');\nconst monsterName = document.querySelector('#monsterName');\nconst monsterHealthText = document.querySelector('#monsterHealth');\n\nconst weapons = [\n  {\n    name: 'stick',\n    power: 5,\n  },\n  {\n    name: 'dagger',\n    power: 30,\n  },\n  {\n    name: 'claw hammer',\n    power: 50,\n  },\n  {\n    name: 'sword',\n    power: 100,\n  },\n];\n\nconst monsters = [\n  {\n    name: 'slime',\n    level: 2,\n    health: 15,\n  },\n  {\n    name: 'fanged beast',\n    level: 8,\n    health: 60,\n  },\n  {\n    name: 'dragon',\n    level: 20,\n    health: 300,\n  },\n];\n\nconst locations = [\n  {\n    name: 'town square',\n    'button text': ['Go to store', 'Go to cave', 'Fight dragon'],\n    'button functions': [goStore, goCave, fightDragon],\n    text: 'You are in the town square. You see a sign that says \"Store\".',\n  },\n  {\n    name: 'store',\n    'button text': [\n      'Buy 10 health (10 gold)',\n      'Buy weapon (30 gold)',\n      'Go to town square',\n    ],\n    'button functions': [buyHealth, buyWeapon, goTown],\n    text: 'You enter the store.',\n  },\n  {\n    name: 'cave',\n    'button text': ['Fight slime', 'Fight fanged beast', 'Go to town square'],\n    'button functions': [fightSlime, fightBeast, goTown],\n    text: 'You enter the cave. You see some monsters.',\n  },\n  {\n    name: 'fight',\n    'button text': ['Attack', 'Dodge', 'Run'],\n    'button functions': [attack, dodge, goTown],\n    text: 'You are fighting a monster.',\n  },\n  {\n    name: 'kill monster',\n    'button text': [\n      'Go to town square',\n      'Go to town square',\n      'Go to town square',\n    ],\n    'button functions': [goTown, goTown, goTown],\n    text: 'The monster screams \"Arg!\" as it dies. You gain experience points and find gold.',\n  },\n  {\n    name: 'lose',\n    'button text': ['REPLAY?', 'REPLAY?', 'REPLAY?'],\n    'button functions': [restart, restart, restart],\n    text: 'You die. &#x2620;',\n  },\n  {\n    name: 'win',\n    'button text': ['REPLAY?', 'REPLAY?', 'REPLAY?'],\n    'button functions': [restart, restart, restart],\n    text: 'You defeat the dragon! YOU WIN THE GAME! &#x1F389;',\n  },\n];\n\n// initialize buttons\nbutton1.onclick = goStore;\nbutton2.onclick = goCave;\nbutton3.onclick = fightDragon;\n\nfunction update(location) {\n  monsterStats.style.display = 'none';\n  button1.innerHTML = location['button text'][0];\n  button2.innerHTML = location['button text'][1];\n  button3.innerHTML = location['button text'][2];\n  button1.onclick = location['button functions'][0];\n  button2.onclick = location['button functions'][1];\n  button3.onclick = location['button functions'][2];\n  text.innerHTML = location.text;\n}\n\nfunction goTown() {\n  update(locations[0]);\n}\n\nfunction goStore() {\n  update(locations[1]);\n}\n\nfunction goCave() {\n  update(locations[2]);\n}\n\nfunction buyHealth() {\n  if (gold >= 10) {\n    gold -= 10;\n    health += 10;\n    goldText.innerText = gold;\n    healthText.innerText = health;\n  } else {\n    text.innerText = 'You do not have enough gold to buy health.';\n  }\n}\n\nfunction buyWeapon() {\n  if (currentWeaponIndex < weapons.length - 1) {\n    if (gold >= 30) {\n      gold -= 30;\n      currentWeaponIndex++;\n      goldText.innerText = gold;\n      let newWeapon = weapons[currentWeaponIndex].name;\n      text.innerText = 'You now have a ' + newWeapon + '.';\n      inventory.push(newWeapon);\n      text.innerText += ' In your inventory you have: ' + inventory;\n    } else {\n      text.innerText = 'You do not have enough gold to buy a weapon.';\n      button2.innerText = 'Sell weapon for 15 gold';\n      button2.onclick = sellWeapon();\n    }\n  } else {\n    text.innerText = 'You already have the most powerful weapon!';\n  }\n}\n\nfunction sellWeapon() {\n  if (inventory.length > 1) {\n    gold += 15;\n    goldText.innerText = gold;\n    let currentWeapon = inventory.shift();\n    text.innerText = 'You sold a ' + currentWeapon + '.';\n    text.innerText += ' In your inventory you have: ' + inventory + '.';\n  } else {\n    text.innerText = `Don't sell your only weapon!`;\n  }\n}\n\nfunction fightSlime() {\n  fighting = 0;\n  goFight();\n}\n\nfunction fightBeast() {\n  fighting = 1;\n  goFight();\n}\n\nfunction fightDragon() {\n  fighting = 2;\n  goFight();\n}\n\nfunction goFight() {\n  update(locations[3]);\n  monsterHealth = monsters[fighting].health;\n  monsterStats.style.display = 'block';\n  monsterName.innerText = monsters[fighting].name;\n  monsterHealthText.innerText = monsterHealth;\n}\n\nfunction attack() {\n  text.innerText = 'The ' + monsters[fighting].name + ' attacks.';\n  text.innerText +=\n    ' You attack it with your ' + weapons[currentWeaponIndex].name + '.';\n  health -= getMonsterAttackValue(monsters[fighting].level);\n  healthText.innerText = health;\n  monsterHealthText.innerText = monsterHealth;\n  if (isMonsterHit()) {\n    monsterHealth -=\n      weapons[currentWeaponIndex].power + Math.floor(Math.random() * xp) + 1;\n  }\n  if (health <= 0) {\n    lose();\n  } else if (monsterHealth <= 0) {\n    if (fighting === 2) {\n      winGame();\n    } else {\n      defeatMonster();\n    }\n  }\n}\n\nfunction getMonsterAttackValue(level) {\n  const hit = level * 5 - Math.floor(Math.random() * xp);\n  console.log(hit);\n  return hit > 0 ? hit : 0;\n}\n\nfunction dodge() {\n  text.innerText =\n    'You dodge the attack from the ' + monsters[fighting].name + '.';\n}\n\nfunction defeatMonster() {\n  gold += Math.floor(monsters[fighting].level * 6.7);\n  xp += monsters[fighting].level;\n  goldText.innerText = gold;\n  xpText.innerText = xp;\n  update(locations[4]);\n}\n\nfunction lose() {\n  update(locations[5]);\n}\n\nfunction winGame() {\n  update(locations[6]);\n}\n\nfunction restart() {\n  xp = 0;\n  health = 100;\n  gold = 50;\n  currentWeaponIndex = 0;\n  inventory = ['stick'];\n  goldText.innerText = gold;\n  healthText.innerText = health;\n  xpText.innerText = xp;\n  goTown();\n}\n"],"names":["xp","health","gold","currentWeaponIndex","fighting","monsterHealth","inventory","button1","button2","button3","text","xpText","healthText","goldText","monsterStats","monsterName","monsterHealthText","weapons","monsters","locations","goStore","goCave","fightDragon","buyHealth","buyWeapon","goTown","fightSlime","fightBeast","attack","dodge","restart","update","location","newWeapon","sellWeapon","currentWeapon","goFight","getMonsterAttackValue","lose","winGame","defeatMonster","level","hit"],"mappings":"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"}