{"version":3,"file":"gragon-repeller.js","sources":["../src/js/dragon-repeller.js"],"sourcesContent":["let xp = 0;\nlet health = 100;\nlet gold = 50;\nlet currentWeaponIndex = 0;\nlet fighting;\nlet monsterHealth;\nlet inventory = ['Stick'];\n\nconst button1 = document.querySelector('#button1');\nconst button2 = document.querySelector('#button2');\nconst button3 = document.querySelector('#button3');\nconst text = document.querySelector('#text');\nconst xpText = document.querySelector('#xpText');\nconst healthText = document.querySelector('#healthText');\nconst goldText = document.querySelector('#goldText');\nconst monsterStats = document.querySelector('#monsterStats');\nconst monsterName = document.querySelector('#monsterName');\nconst monsterHealthText = document.querySelector('#monsterHealth');\n\nconst weapons = [\n  {\n    name: 'Stick',\n    power: 5,\n  },\n  {\n    name: 'Dagger',\n    power: 30,\n  },\n  {\n    name: 'Claw Hammer',\n    power: 50,\n  },\n  {\n    name: 'Sword',\n    power: 100,\n  },\n];\n\nconst monsters = [\n  {\n    name: 'Slime',\n    level: 2,\n    health: 15,\n  },\n  {\n    name: 'Fanged Beast',\n    level: 8,\n    health: 60,\n  },\n  {\n    name: 'DRAGON',\n    level: 20,\n    health: 300,\n  },\n];\n\nconst locations = [\n  {\n    name: 'town square',\n    'button text': ['Go to store', 'Go to cave', 'Fight dragon'],\n    'button functions': [goStore, goCave, fightDragon],\n    text: 'You are in the town square. You see a sign that says \"Store\".',\n  },\n  {\n    name: 'store',\n    'button text': [\n      'Buy 10 health (10 gold)',\n      'Buy weapon (30 gold)',\n      'Go to town square',\n    ],\n    'button functions': [buyHealth, buyWeapon, goTown],\n    text: 'You enter the store.',\n  },\n  {\n    name: 'cave',\n    'button text': ['Fight Slime', 'Fight Fanged Beast', 'Go to town square'],\n    'button functions': [fightSlime, fightBeast, goTown],\n    text: 'You enter the cave. You see some monsters.',\n  },\n  {\n    name: 'fight',\n    'button text': ['Attack', 'Dodge', 'Run'],\n    'button functions': [attack, dodge, goTown],\n    text: 'You are fighting a monster.',\n  },\n  {\n    name: 'kill monster',\n    'button text': [\n      'Go to town square',\n      'Go to town square',\n      'Go to town square',\n    ],\n    'button functions': [goTown, goTown, easterEgg],\n    text: 'The monster screams \"Arg!\" as it dies. You gain experience points and find gold.',\n  },\n  {\n    name: 'lose',\n    'button text': ['REPLAY?', 'REPLAY?', 'REPLAY?'],\n    'button functions': [restart, restart, restart],\n    text: 'You die. &#x2620;',\n  },\n  {\n    name: 'win',\n    'button text': ['REPLAY?', 'REPLAY?', 'REPLAY?'],\n    'button functions': [restart, restart, restart],\n    text: 'You defeat the dragon! YOU WIN THE GAME! &#x1F389;',\n  },\n  {\n    name: 'easter egg',\n    'button text': ['2', '8', 'Go to town square?'],\n    'button functions': [pickTwo, pickEight, goTown],\n    text: 'You find a secret game. Pick a number above. Ten numbers will be randomly chosen between 0 and 10. If the number you choose matches one of the random numbers, you win!',\n  },\n];\n\n// initialize buttons\nbutton1.onclick = goStore;\nbutton2.onclick = goCave;\nbutton3.onclick = fightDragon;\n\nfunction update(location) {\n  monsterStats.style.display = 'none';\n  button1.innerHTML = location['button text'][0];\n  button2.innerHTML = location['button text'][1];\n  button3.innerHTML = location['button text'][2];\n  button1.onclick = location['button functions'][0];\n  button2.onclick = location['button functions'][1];\n  button3.onclick = location['button functions'][2];\n  text.innerHTML = location.text;\n}\n\nfunction goTown() {\n  update(locations[0]);\n}\n\nfunction goStore() {\n  update(locations[1]);\n}\n\nfunction goCave() {\n  update(locations[2]);\n}\n\nfunction buyHealth() {\n  if (gold >= 10) {\n    gold -= 10;\n    health += 10;\n    goldText.innerText = gold;\n    healthText.innerText = health;\n  } else {\n    text.innerText = 'You do not have enough gold to buy health.';\n  }\n}\n\nfunction buyWeapon() {\n  if (currentWeaponIndex < weapons.length - 1) {\n    if (gold >= 30) {\n      gold -= 30;\n      currentWeaponIndex++;\n      goldText.innerText = gold;\n      let newWeapon = weapons[currentWeaponIndex].name;\n      text.innerText = 'You now have a ' + newWeapon + '.';\n      inventory.push(newWeapon);\n      text.innerText += ' In your inventory you have: ' + inventory;\n    } else {\n      text.innerText = 'You do not have enough gold to buy a weapon.';\n      button2.innerText = 'Sell weapon for 15 gold';\n      button2.onclick = sellWeapon();\n    }\n  } else {\n    text.innerText = 'You already have the most powerful weapon!';\n  }\n}\n\nfunction sellWeapon() {\n  if (inventory.length > 1) {\n    gold += 15;\n    goldText.innerText = gold;\n    let currentWeapon = inventory.shift();\n    text.innerText = 'You sold a ' + currentWeapon + '.';\n    text.innerText += ' In your inventory you have: ' + inventory + '.';\n  } else {\n    text.innerText = `Don't sell your only weapon!`;\n  }\n}\n\nfunction fightSlime() {\n  fighting = 0;\n  goFight();\n}\n\nfunction fightBeast() {\n  fighting = 1;\n  goFight();\n}\n\nfunction fightDragon() {\n  fighting = 2;\n  goFight();\n}\n\nfunction goFight() {\n  update(locations[3]);\n  monsterHealth = monsters[fighting].health;\n  monsterStats.style.display = 'block';\n  monsterName.innerText = monsters[fighting].name;\n  monsterHealthText.innerText = monsterHealth;\n}\n\nfunction attack() {\n  text.innerText = 'The ' + monsters[fighting].name + ' attacks.';\n  text.innerText +=\n    ' You attack it with your ' + weapons[currentWeaponIndex].name + '.';\n  health -= getMonsterAttackValue(monsters[fighting].level);\n  healthText.innerText = health;\n  monsterHealthText.innerText = monsterHealth;\n  if (isMonsterHit()) {\n    monsterHealth -=\n      weapons[currentWeaponIndex].power + Math.floor(Math.random() * xp) + 1;\n  } else {\n    text.innerText += ' You miss.';\n  }\n  if (health <= 0) {\n    lose();\n  } else if (monsterHealth <= 0) {\n    if (fighting === 2) {\n      winGame();\n    } else {\n      defeatMonster();\n    }\n  }\n  if (Math.random() <= 0.1 && inventory.length !== 1) {\n    text.innerText += ' Your ' + inventory.pop() + ' breaks.';\n    currentWeaponIndex--;\n  }\n}\n\nfunction getMonsterAttackValue(level) {\n  const hit = level * 5 - Math.floor(Math.random() * xp);\n  return hit > 0 ? hit : 0;\n}\n\nfunction isMonsterHit() {\n  return Math.random() > 0.2 || health < 20;\n}\n\nfunction dodge() {\n  text.innerText =\n    'You dodge the attack from the ' + monsters[fighting].name + '.';\n}\n\nfunction defeatMonster() {\n  gold += Math.floor(monsters[fighting].level * 6.7);\n  xp += monsters[fighting].level;\n  goldText.innerText = gold;\n  xpText.innerText = xp;\n  update(locations[4]);\n}\n\nfunction lose() {\n  update(locations[5]);\n}\n\nfunction winGame() {\n  update(locations[6]);\n}\n\nfunction restart() {\n  xp = 0;\n  health = 100;\n  gold = 50;\n  currentWeaponIndex = 0;\n  inventory = ['stick'];\n  goldText.innerText = gold;\n  healthText.innerText = health;\n  xpText.innerText = xp;\n  goTown();\n}\n\nfunction easterEgg() {\n  update(locations[7]);\n}\n\nfunction pickTwo() {\n  pick(2);\n}\n\nfunction pickEight() {\n  pick(8);\n}\n\nfunction pick(guess) {\n  const numbers = [];\n  while (numbers.length < 10) {\n    numbers.push(Math.floor(Math.random() * 11));\n  }\n  text.innerText = 'You picked ' + guess + '. Here are the random numbers:\\n';\n  for (let i = 0; i < 10; i++) {\n    text.innerText += numbers[i] + '\\n';\n  }\n  if (numbers.includes(guess)) {\n    text.innerText += 'Right! You win 20 gold!';\n    gold += 20;\n    goldText.innerText = gold;\n  } else {\n    text.innerText += 'Wrong! You lose 10 health!';\n    health -= 10;\n    healthText.innerText = health;\n    if (health <= 0) {\n      lose();\n    }\n  }\n}\n"],"names":["xp","health","gold","currentWeaponIndex","fighting","monsterHealth","inventory","button1","button2","button3","text","xpText","healthText","goldText","monsterStats","monsterName","monsterHealthText","weapons","monsters","locations","goStore","goCave","fightDragon","buyHealth","buyWeapon","goTown","fightSlime","fightBeast","attack","dodge","easterEgg","restart","pickTwo","pickEight","update","location","newWeapon","sellWeapon","currentWeapon","goFight","getMonsterAttackValue","isMonsterHit","lose","winGame","defeatMonster","level","hit","pick","guess","numbers","i"],"mappings":"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"}